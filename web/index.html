<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <label for="text_input">Write something</label>
    <input id="text_input" type="text" maxlength=200 />
    <button onclick="sendData()">Send</button>
    <p>
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur rem,
      quae maxime accusamus temporibus voluptatum provident asperiores incidunt
      repudiandae optio ipsa non quibusdam blanditiis necessitatibus. Ea
      pariatur voluptatibus illum perferendis.
    </p>
  </body>
  <script>
    const socket = new WebSocket("/ws");
    let connected = false;

    socket.onopen = function (event) {
      console.log("Connected to WebSocket server");
      connected = true;
    };

    socket.onmessage = function (event) {
      console.log("Message from server:", event.data);
    };

    socket.onclose = function (event) {
      console.log("Disconnected from WebSocket server");
      connected = false;
    };

    socket.onerror = function (error) {
      console.error("WebSocket error:", error);
    };

    function sendData() {
      if (connected) {
        const inputText = document.getElementById("text_input");
        console.log(inputText.value);
        socket.send(inputText.value);
      } else {
        console.log("socket not connected");
      }
    }
  </script>
</html>
